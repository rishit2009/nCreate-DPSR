<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
    tailwind.config = {
        theme: {
          extend: {
            colors: {
              text: '#f7f3ec',
              background: '#010101',
              primary: '#eb0037',
              secondary: '#0a9682',
              accent: '#510b1c',
            },
          },
        },
      }
    </script>
   
    <style>
      :root {
        --text: #f7f3ec;
        --background: #010101;
        --primary: #eb0037;
        --secondary: #0a9682;
        --accent: #510b1c;
      }

      /* width */
      ::-webkit-scrollbar {
         width: 2px;
         border-radius: 50%;
      }

      /* Track */
      ::-webkit-scrollbar-track {
         background: #000;
      }

      /* Handle */
      ::-webkit-scrollbar-thumb {
         background: #510b1c;
      }

      /* Handle on hover */
      ::-webkit-scrollbar-thumb:hover {
         background: #670f25;
      }
    </style>

    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.2.0/remixicon.min.css">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <!-- jQuery (required for Select2) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Select2 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

    <!-- Select2 JS -->
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/assets/logo.png') }}">

    <title>{% block title %} {% endblock %}</title>
</head>
<body class="bg-background">
   <header class="header" id="header">
      <nav class="nav px-12 items-center">
        <a href="{{ url_for('index') }}" class="nav__logo"><img src="{{ url_for('static', filename='images/assets/logo.png') }}" alt="" class="h-24 w-24"></a>
    
        <div class="nav__menu" id="nav-menu">
          <ul class="nav__list">
            <li class="nav__item">
              <a href="{{url_for('index')}}" class="nav__link">
                <i class="ri-arrow-right-up-line"></i>
                <span>Home</span>
              </a>
            </li>
    
            <li class="nav__item">
              <a href="{{url_for('view_clubs')}}" class="nav__link">
                <i class="ri-arrow-right-up-line"></i>
                <span>Clubs</span>
              </a>
            </li>
    
            <li class="nav__item">
              <a href="{{url_for('view_forums')}}" class="nav__link">
                <i class="ri-arrow-right-up-line"></i>
                <span>Forums</span>
              </a>
            </li>
    
            <li class="nav__item">
              <a href="{{url_for('view_events')}}" class="nav__link">
                <i class="ri-arrow-right-up-line"></i>
                <span>Events</span>
              </a>
            </li>

            <li class="nav__item">
              <a href="{{url_for('learn')}}" class="nav__link">
                <i class="ri-arrow-right-up-line"></i>
                <span>Learn</span>
              </a>
            </li>
    
            {% if current_user.is_authenticated %}
            <!-- Notification bell -->
            <li class="nav__item hello-bye">
              <a href="#" class="nav__link" onclick="openModal()">
                <ion-icon name="notifications-outline"></ion-icon>
              </a>
            </li>
    
            <!-- User profile -->
            <li class="nav__item hello-bye">
              <a href="{{ url_for('user_profile', uid=current_user.id) }}" class="nav__link">
                <ion-icon name="person-circle-outline"></ion-icon>
              </a>
            </li>

            {% else %}
            <li class="nav__item hello-bye">
               <a href="{{ url_for('login') }}" class="nav__link">
                 <button class="bg-text text-background rounded-full px-6 py-2 font-bold">
                     Login
                 </button>
               </a>
             </li>

             {% endif %}
          </ul>
    
          <!-- Close button -->
          <div class="nav__close" id="nav-close">
            <i class="ri-close-large-line"></i>
          </div>
        </div>
    
        <!-- Toggle button -->
        <div class="nav__toggle" id="nav-toggle">
          <i class="ri-menu-line"></i>
        </div>
      </nav>
    </header>


  <!-- Dialog Container -->
  <div id="notifModal" class="fixed inset-0 flex items-center justify-center z-50 scale-0 transition-all duration-300">
    <!-- Background Overlay -->

    <!-- Dialog Box -->
    <div class="relative bg-background w-11/12 max-w-lg p-6 rounded-lg shadow-lg z-10 transition-all">
      <!-- Close Icon (Top Right) -->
      <button class="absolute top-3 right-3 text-gray-500 hover:text-gray-700" onclick="closeModal()">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-6 h-6">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>

      <!-- Title -->
      <h2 class="text-xl font-semibold text-gray-200 mb-8">Notifications</h2>

      <!-- Notification Content -->
      <div class="space-y-2 text-center" id="notifs-container">
        {% if not current_user.notifications %}
        <p class="text-gray-300">There is nothing here yet :( </p>
        {% else %}
        {% for notif in current_user.notifications %}
        <p class="text-gray-200 hover:bg-gray-900 py-4">{{ notif }}</p>
        {% endfor %}
        {% endif %}
      </div>

      <!-- Clear Button -->
      <div class="mt-8">
        <button class="w-full bg-primary text-white py-2 px-4 rounded-md hover:bg-red-600 bold" onclick="clear_notifications()">
          Clear Notifications
        </button>
      </div>
    </div>
  </div>


<script>

function openModal() {
  document.getElementById('notifModal').classList.remove('scale-0');
  document.getElementById('notifModal').classList.add('scale-100');
}


  function closeModal() {
    document.getElementById('notifModal').classList.add('scale-0');
    document.getElementById('notifModal').classList.remove('scale-100');
  }

  function clear_notifications() {
    const uid = '{{ current_user.id }}';  // Jinja templating to get the current user ID

    fetch(`/clear_notif/${uid}`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
    })
    .then(response => {
      if (response.ok) {
        return response.json();
      }
      throw new Error('Network response was not ok');
    })
    .then(data => {
      console.log('Notifications cleared:', data);
      notifsc = document.getElementById('notifs-container');
      notifsc.innerHTML = '<p class="text-gray-300">There is nothing here yet :(</p>'
    })
    .catch(error => {
      console.error('There was a problem with the fetch operation:', error);
    });
  }

</script>

    

    {% block content %}
    {% endblock %}


    <footer class="w-full bg-accent py-16 mt-20 text-text">
      <section class="bg-accent py-12">
        <div class="container mx-auto flex flex-col items-center justify-center">
          <h2 class="text-3xl font-bold mb-4">Subscribe to Our Newsletter</h2>
          <p class="mb-8">Stay updated with the latest news and updates from Medify</p>
          <form id="newsletterForm">
              <div class="flex items-center border-2 bg-background border-primary rounded-lg p-[4px]">
                  <input type="email" placeholder='Your Email Address' class='bg-background p-2 rounded-lg text-text outline-0 border-0 transition-colors'>
                  <button class=' bg-text hover:bg-gray-200 transition-colors text-black font-semibold px-4 py-2 rounded-lg'>Subscribe</button>
              </div>
          </form>
          <p id="successMessage" class="text-green-500 mt-4 hidden">Thank you for subscribing!</p>
          <p id="errorMessage" class="text-red-500 mt-4 hidden">Something went wrong. Please try again later.</p>
        </div>
      </section>
      
      <script>
        document.getElementById('newsletterForm').addEventListener('submit', function(event) {
          event.preventDefault();
          var email = document.getElementById('emailInput').value;
          if(validateEmail(email)) {
            
            setTimeout(function() {
              
              document.getElementById('successMessage').classList.remove('hidden');
              document.getElementById('errorMessage').classList.add('hidden');
             
              document.getElementById('emailInput').value = '';
            }, 1000);
          } else {
       
            document.getElementById('successMessage').classList.add('hidden');
            document.getElementById('errorMessage').classList.remove('hidden');
          }
        });
      
        function validateEmail(email) {
          var re = /\S+@\S+\.\S+/;
          return re.test(email);
        }
      </script>
      <div class="md:px-12 lg:px-28">
        <div class="container m-auto space-y-6">
          <ul
            role="list"
            class="flex flex-col items-center justify-center gap-4 py-4 sm:flex-row sm:gap-8"
          >
            <li role="listitem"><a href="{{url_for('index')}}" class="hover:text-primary">Home</a></li>
            <li role="listitem"><a href="{{url_for('view_clubs')}}" class="hover:text-primary">Clubs</a></li>
            <li role="listitem"><a href="{{url_for('view_events')}}" class="hover:text-primary">Events</a></li>
            <li role="listitem"><a href="{{url_for('view_forums')}}" class="hover:text-primary">Forums</a></li>
            <li role="listitem"><a href="{{url_for('learn')}}" class="hover:text-primary">Learn</a></li>
          </ul>
          <div class="m-auto flex w-max items-center justify-between space-x-4">
            <a href="tel:+243996660436" aria-label="call">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="currentColor"
                class="m-auto w-5"
                viewBox="0 0 16 16"
              >
                <path
                  fill-rule="evenodd"
                  d="M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511z"
                ></path>
              </svg>
            </a>
            <a href="mailto:hello@mail.com" aria-label="send mail">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="currentColor"
                class="m-auto w-5"
                viewBox="0 0 16 16"
              >
                <path
                  d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555zM0 4.697v7.104l5.803-3.558L0 4.697zM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757zm3.436-.586L16 11.801V4.697l-5.803 3.546z"
                ></path>
              </svg>
            </a>
            <a href="#" title="facebook" target="blank" aria-label="facebook">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="currentColor"
                class="m-auto w-5"
                viewBox="0 0 16 16"
              >
                <path
                  d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"
                ></path>
              </svg>
            </a>
            <a href="#" title="linkedin" target="blank" aria-label="linkedin">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="currentColor"
                class="m-auto w-5"
                viewBox="0 0 16 16"
              >
                <path
                  d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"
                ></path>
              </svg>
            </a>
          </div>
    
          <div class="text-center">
            <span class="text-sm tracking-wide"
              >Copyright Â© DTC <span id="year"></span> | All rights reserved</span
            >
          </div>
        </div>
      </div>
    </footer>


    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    
</body>
</html>
